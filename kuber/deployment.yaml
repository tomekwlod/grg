====this line breaks the file syntax on purpose; use autogenerated file instead!====
apiVersion: apps/v1 
kind: Deployment # Type of the kubernetes resource
metadata:
  name: grg # Name of the Kubernetes resource
  labels:
    app: grg
  namespace: go
spec:
  replicas: 1 # Number of pods to run at any given time
  selector:
    matchLabels: 
      app: grg # This deployment applies to any Pods matching the specified label
  template: # This deployment will create a set of pods using the configurations in this template
    metadata:
      labels: # The labels that will be applied to all of the pods in this deployment
        app: grg
    spec: # Spec for the container which will run in the Pod
      containers:
      - name: grg
        image: __REPLACE__IMAGEHASH__ # The image we are getting from dockerhub
        imagePullPolicy: IfNotPresent # If we have not pulled it before, get it from dockerhub
        ports:
          - containerPort: 8080
        # envFrom:
        #   - secretRef:
        #       name: grg-env # Name of the secret environmental variable file to load
        volumeMounts:
          - name: env-secret
            mountPath: /usr/envdir
            readOnly: true
      volumes:
        - name: env-secret
          secret:
            secretName: grg-env
---
apiVersion: v1
kind: Service
metadata:
  name: grg-service
  namespace: go
spec:
  type: LoadBalancer    #
  ports:
    - name: http        #
      targetPort: 8080
      port: 80
  selector:
    app: grg